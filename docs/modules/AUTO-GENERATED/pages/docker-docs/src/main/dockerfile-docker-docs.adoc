= Dockerfile

// +-----------------------------------------------+
// |                                               |
// |    DO NOT EDIT HERE !!!!!                     |
// |                                               |
// |    File is auto-generated by pipeline.        |
// |    Contents are based on Dockerfile docs.     |
// |                                               |
// +-----------------------------------------------+


Build and run the semver application.

== Overview

This Dockerfile is used for the Github Action. This image is published to
link:https://hub.docker.com/r/sommerfeldio/semver[DockerHub] as well and can be used standalone.
This Dockerfile bundles the Go application. The Go application serves as the core logic for
managing and handling all tasks related to semantic versions.

This is a Multistage Dockerfile that separates building the binary for Go application from
running the binary in minimalistic linux environment.

=== Example

For standalone usage of the Docker image, run `docker run --rm local/semver:dev` (showing the
applications help) or `docker run --rm local/semver:dev validate v.1.0` to validate a version
against semantic versioning rules.

To build and run the image for testng purposes locally use `docker build -t local/semver:dev .`
and `docker run --rm local/semver:dev`.

== Prerequisites

This image has been developed and tested with Docker version 24.0.2 on top of Ubuntu 22.10.

== Stage 1: `build`

In the `build` stage, the application's source code is copied into the Docker image, and the
binary is then built from the Go sources. The link:https://hub.docker.com/_/golang[`golang`]
image is utilized, which is based on Apline Linux and comes pre-configured with all the necessary
tools for compiling Go applications. Nno extra software is installed.

== Stage 2: `run`

In the `run` stage, the `semver` binary is copied from the `build` stage and serves as the
entry point for the Docker image. The base image used for this stage is link:https://hub.docker.com/_/alpine[Alpine].

== See also

* For the compose config, that orchestrates the local build process, see xref:AUTO-GENERATED:docker-docs/src/main/docker-compose-yml-docker-docs.adoc[`src/main/docker-compose.yml`]
* To run this Compose config, use xref:AUTO-GENERATED:bash-docs/src/main/semver-sh.adoc[`src/main/semver.sh`] bash script.
